name: Release Eum Server

on: [push]

jobs:
    test_eum_server:
        name: "Run EUM-Server tests"
        runs-on: ubuntu-latest
        container: openjdk:8-jdk
        
        steps:
            - uses: actions/checkout@v3 
            - name: Grant execute permission for gradlew
              run: chmod +x gradlew
            - name: Run gradlew tests
              run: ./gradlew test
            
    publish_docker_images:
        name: "Publish docker image"
        runs-on: ubuntu-latest
        environment: release
        needs: [test_eum_server]
        
        steps:
            - uses: actions/checkout@v3
            - name: Grant execute permission for gradlew
              run: chmod +x gradlew
              
            
    